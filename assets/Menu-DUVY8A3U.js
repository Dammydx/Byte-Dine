import{c as u,u as p,r,j as e,m as c,f as b,g as f,a as j}from"./index-_Ix21bTw.js";import{C as v}from"./chevron-down-BJAUabiA.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=u("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=u("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),k=({item:a})=>{const{addToCart:o,removeFromCart:m,cartItems:x}=p(),[i,g]=r.useState(!1),d=x.find(h=>h.id===a.id),l=d?d.quantity:0,n=`menu-item ${a.is_available?"":"opacity-60"}`,s=()=>{a.is_available&&o(a)},t=()=>{m(a.id)};return e.jsxs(c.div,{className:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},layout:!0,children:[e.jsxs("div",{className:"relative overflow-hidden rounded-xl mb-3 h-48",children:[e.jsx("img",{src:a.image_url||"https://images.pexels.com/photos/1640772/pexels-photo-1640772.jpeg",alt:a.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110",loading:"lazy"}),!a.is_available&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold px-2 py-1 rounded-lg",children:"Out of Stock"})}),a.is_special&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-accent-400/90 via-transparent",children:e.jsx("div",{className:"absolute bottom-2 left-2 text-black text-sm font-semibold py-1 px-2 rounded-lg",children:"Today's Special"})})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-heading text-lg font-semibold",children:a.name}),e.jsx("p",{className:"text-primary-500 font-medium",children:b(a.price)})]}),e.jsxs("div",{className:"flex items-center",children:[l>0&&e.jsx(c.button,{whileTap:{scale:.9},onClick:t,className:"text-primary-500 hover:text-primary-600",children:e.jsx(N,{size:24})}),l>0&&e.jsx("span",{className:"mx-2 font-medium",children:l}),e.jsx(c.button,{whileTap:{scale:.9},onClick:s,className:`text-primary-500 hover:text-primary-600 ${a.is_available?"":"cursor-not-allowed opacity-50"}`,disabled:!a.is_available,children:e.jsx(w,{size:24})})]})]}),e.jsx(c.div,{initial:!1,animate:{height:i?"auto":"2.5rem",overflow:"hidden"},className:"text-gray-600 dark:text-gray-400 text-sm mt-2 line-clamp-2",children:e.jsx("p",{children:a.description})}),a.description.length>100&&e.jsx("button",{onClick:()=>g(!i),className:"text-primary-500 text-sm font-medium mt-2 hover:underline",children:i?"Read less":"Read more"})]})},C=({categoryName:a,displayName:o})=>{const[m,x]=r.useState([]),[i,g]=r.useState(!0),[d,l]=r.useState(null);return r.useEffect(()=>{(async()=>{try{g(!0);const s=await f(a);x(s)}catch(s){l("Failed to load items for this category"),console.error(s)}finally{g(!1)}})()},[a]),i?e.jsxs("div",{className:"py-6",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold mb-4",children:o}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((n,s)=>e.jsxs("div",{className:"menu-item animate-pulse",children:[e.jsx("div",{className:"rounded-xl mb-3 h-48 bg-gray-200 dark:bg-gray-700"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]},s))})]}):d?e.jsxs("div",{className:"py-6",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold mb-4",children:o}),e.jsx("div",{className:"card p-4 text-red-500",children:d})]}):m.length===0?null:e.jsxs(c.section,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-6",id:a,children:[e.jsx("h2",{className:"text-2xl font-heading font-bold mb-4",children:o}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(n=>e.jsx(k,{item:n},n.id))})]})},E=()=>{const[a,o]=r.useState([]),[m,x]=r.useState(!0),[i,g]=r.useState(null),[d,l]=r.useState(null);r.useEffect(()=>{(async()=>{try{x(!0);const t=await j();o(t),t.length>0&&l(t[0].name)}catch(t){g("Failed to load menu categories"),console.error(t)}finally{x(!1)}})()},[]);const n=s=>{l(s);const t=document.getElementById(s);if(t){const y=t.getBoundingClientRect().top+window.pageYOffset+-80;window.scrollTo({top:y,behavior:"smooth"})}};return m?e.jsx("div",{className:"max-w-7xl mx-auto py-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-1/3 mb-6"}),e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded-lg mb-8"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,t)=>e.jsxs("div",{className:"menu-item animate-pulse",children:[e.jsx("div",{className:"rounded-xl mb-3 h-48 bg-gray-200 dark:bg-gray-700"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-3"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]},t))})]})}):i?e.jsx("div",{className:"max-w-7xl mx-auto py-6",children:e.jsxs("div",{className:"card p-6 text-red-500",children:[e.jsx("p",{children:i}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 btn btn-primary",children:"Retry"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-heading font-bold mb-2",children:"Our Menu"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse our delicious offerings and place your order directly from your table."})]}),e.jsx("div",{className:"mb-8 overflow-x-auto pb-2",children:e.jsx("div",{className:"flex space-x-2 min-w-max",children:a.map(s=>e.jsx("button",{onClick:()=>n(s.name),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${d===s.name?"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:s.display_name},s.id))})}),e.jsx("div",{className:"space-y-8",children:a.map(s=>e.jsx(C,{categoryName:s.name,displayName:s.display_name},s.id))}),e.jsx(c.button,{initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-24 right-4 bg-primary-500 text-white p-3 rounded-full shadow-lg hover:bg-primary-600 z-10",children:e.jsx(v,{className:"rotate-180",size:24})})]})};export{E as default};
